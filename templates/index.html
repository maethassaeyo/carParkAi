<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ðŸš— Parking Monitor</title>
</head>
<body style="text-align:center; background:#111; color:white;">
    <h1>ðŸš˜ Parking Monitor</h1>
    <img src="{{ url_for('video') }}" width="1000" />

    <h2>à¸ˆà¸³à¸™à¸§à¸™à¸£à¸–à¸—à¸µà¹ˆà¸•à¸£à¸§à¸ˆà¸žà¸š: <span id="numcar">0</span></h2>
    <h2>à¹€à¸«à¸¥à¸·à¸­à¸—à¸µà¹ˆà¸ˆà¸­à¸” :<span id="ava">6</span></h2>
    <h2>P1 :<span id="p1">0</span></h2>
    <h2>P2 :<span id="p2">à¸§à¹ˆà¸²à¸‡</span></h2>
    <h2>P3 :<span id="p3">à¸§à¹ˆà¸²à¸‡</span></h2>
    <h2>P4 :<span id="p4">à¸§à¹ˆà¸²à¸‡</span></h2>
    <h2>P5 :<span id="p5">à¸§à¹ˆà¸²à¸‡</span></h2>







    <script>
        async function update() {
            try {
                const res = await fetch("/numcar");
                const data = await res.json();
                document.getElementById("numcar").textContent = data.numcar;
                document.getElementById("ava").textContent = 5 - data.numcar;


                if(data.P1 == 1){
                    document.getElementById("p1").textContent = "à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡";

                }else if (data.P1 == 0){
                    document.getElementById("p1").textContent = "à¸§à¹ˆà¸²à¸‡";
                }


                if(data.P2 == 1){
                    document.getElementById("p2").textContent = "à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡";

                }else if (data.P2 == 0){
                    document.getElementById("p2").textContent = "à¸§à¹ˆà¸²à¸‡";
                }


                if(data.P3 == 1){
                    document.getElementById("p3").textContent = "à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡";

                }else if (data.P3 == 0){
                    document.getElementById("p3").textContent = "à¸§à¹ˆà¸²à¸‡";
                }

                if(data.P4 == 1){
                    document.getElementById("p4").textContent = "à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡";

                }else if (data.P4 == 0){
                    document.getElementById("p4").textContent = "à¸§à¹ˆà¸²à¸‡";
                }


                if(data.P5 == 1){
                    document.getElementById("p5").textContent = "à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸‡";

                }else if (data.P5 == 0){
                    document.getElementById("p5").textContent = "à¸§à¹ˆà¸²à¸‡";
                }





            } catch (err) {
                console.error(err);
            }
        }


     
        setInterval(update, 500);
    </script>
</body>
</html>
